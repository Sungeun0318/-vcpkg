diff --git a/CMakeLists.txt b/CMakeLists.txt
index bc385c21..fc5aa9a0 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -314,7 +314,6 @@ add_subdirectory(testing)
 add_subdirectory(cdk)
 
 foreach(T cdk cdk_foundation cdk_mysqlx cdk_proto_mysqlx cdk_parser)
-  set_target_properties(${T} PROPERTIES FOLDER "CDK")
 endforeach()
 
 #
diff --git a/cdk/cmake/DepFindProtobuf.cmake b/cdk/cmake/DepFindProtobuf.cmake
index 730389de..33c67c38 100644
--- a/cdk/cmake/DepFindProtobuf.cmake
+++ b/cdk/cmake/DepFindProtobuf.cmake
@@ -44,6 +44,7 @@
 #
 #
 
+if(0)
 if(TARGET ext::protobuf)
   return()
 endif()
@@ -64,7 +65,7 @@ add_ext_targets(protobuf
   LIBRARY protobuf pb_libprotobuf
   EXECUTABLE protoc pb_protoc
 )
-
+endif()
 
 # Standard PROTOBUF_GENERATE_CPP modified to our usage
 function(mysqlx_protobuf_generate_cpp SRCS HDRS)
diff --git a/cdk/core/CMakeLists.txt b/cdk/core/CMakeLists.txt
index 30f7baf1..7bcdb123 100644
--- a/cdk/core/CMakeLists.txt
+++ b/cdk/core/CMakeLists.txt
@@ -33,6 +33,7 @@ cmake_minimum_required(VERSION 2.8)
 
 #ADD_SUBDIRECTORY(tests)
 
+find_package(protobuf CONFIG REQUIRED)
 
 SET(cdk_sources
   session.cc
@@ -45,7 +46,7 @@ add_library(cdk STATIC ${cdk_sources} ${HEADERS})
 
 target_link_libraries(cdk
   PUBLIC  cdk_mysqlx cdk_parser
-  PRIVATE ext::protobuf-lite  # required by codecc.cc
+  PRIVATE protobuf::libprotobuf-lite  # required by codecc.cc
 )
 
 add_coverage(cdk)
diff --git a/cdk/protocol/mysqlx/CMakeLists.txt b/cdk/protocol/mysqlx/CMakeLists.txt
index cfc81daf..d7b50546 100644
--- a/cdk/protocol/mysqlx/CMakeLists.txt
+++ b/cdk/protocol/mysqlx/CMakeLists.txt
@@ -26,7 +26,8 @@
 # along with this program; if not, write to the Free Software Foundation, Inc.,
 # 51 Franklin St, Fifth Floor, Boston, MA 02110-1301  USA
 
-find_dependency(Protobuf)
+find_package(protobuf CONFIG REQUIRED)
+include(DepFindProtobuf)
 find_dependency(Compression)
 
 include(CheckIncludeFile)
@@ -130,9 +131,9 @@ target_include_directories(cdk_proto_mysqlx PRIVATE
 )
 
 if(use_full_protobuf)
-  target_link_libraries(cdk_proto_mysqlx PRIVATE ext::protobuf)
+  target_link_libraries(cdk_proto_mysqlx PUBLIC protobuf::libprotobuf)
 else()
-  target_link_libraries(cdk_proto_mysqlx PRIVATE ext::protobuf-lite)
+  target_link_libraries(cdk_proto_mysqlx PUBLIC protobuf::libprotobuf-lite)
 endif()
 
 if (WIN32)
